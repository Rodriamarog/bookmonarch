{% extends "base.html" %}

{% block content %}
<h1>Generating Your Book</h1>
<p>Please wait while we generate your book. This process may take several minutes.</p>

<div class="progress">
    <h3>Progress:</h3>
    <div id="progress-status">
        <p>{{ status or "Starting book generation..." }}</p>
    </div>
</div>

<script>
// Simple progress polling - in a real implementation, you might use WebSockets
function checkProgress() {
    fetch('/progress')
        .then(response => response.json())
        .then(data => {
            document.getElementById('progress-status').innerHTML = '<p>' + data.status + '</p>';
            if (data.complete) {
                window.location.href = '/results';
            } else {
                setTimeout(checkProgress, 2000);
            }
        })
        .catch(error => {
            console.error('Error checking progress:', error);
            setTimeout(checkProgress, 5000);
        });
}

// Start checking progress
setTimeout(checkProgress, 2000);
</script>
{% endblock %}